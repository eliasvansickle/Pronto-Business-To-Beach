<div class="admin_business_page">
	<div class="admin_business_table container">
		<div class="container">
			<div class="row col-md-12">
				<div class="col-md-2 col-md-offset-10">
					<input ng-model='filter_name' class='form-control admin_filter_businesses' type="text" placeholder='Filter Businesses'>
				</div>
			</div>
		</div>
		<h1>Business</h1>
		<table class='table'>
			<thead>
				<th>Business Name</th>
				<th>Email</th>
				<th>Phone</th>
				<th>Street Address</th>
				<th>City</th>
				<th>State</th>
				<th>Zip Code</th>
				<th>Status</th>
				<th></th>
			</thead>
			<tbody>
				<tr ng-repeat='business in businesses | filter: filter_name | orderBy: "-created_at"'>
					<td ng-bind='business.business_name'></td>
					<td><a href id='emailBusinessLink' data-toggle='modal' data-target='#sendEmailToBiz' data-email="{{ business.email }}" ng-bind='business.email'></a></td>
					<td ng-bind='business.phone'></td>
					<td ng-bind='business.street_address'></td>
					<td ng-bind='business.city'></td>
					<td ng-bind='business.state'></td>
					<td ng-bind='business.zip_code'></td>
					<td ng-bind='business.status'></td>
					<td><p><a href ng-click='showBusinessProfile(business._id)'>Update</a></p><p><a href ng-click='deleteBusiness(business._id)'>Delete</a></p></td>
				</tr>
			</tbody>
		</table>
	</div>
</div>


<div class="modal fade" id='sendEmailToBiz' tabindex='-1' role='dialog'>
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Email Business</h4>
			</div>
			<div class="modal-body">
				<form>
					<div class="form-group">
						<label class="control-label" for="email_address">To: </label>
						<input id='email_address' class='form-control' type="text" name="email_address" value=''><br>

						<label for="email_subject" class='control-label'>Subject</label>
						<input type="text" class='form-control' name='email_subject' id='email_subject'><br>
						
						<label for="email_content" class="control-label">Message</label>
						<textarea name='email_content' id='email_content' class='form-control'></textarea><br>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" ng-click='sendEmail()'>Send</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id='successfullySentEmail' tabindex='-1' role='dialog'>
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Success!</h4>
			</div>
		</div>
	</div>
</div>